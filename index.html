<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simple Rule-Based Chatbot</title>
    <!-- Load Tailwind CSS for simple, clean styling -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Custom scrollbar styling for a cleaner look */
        #chat-window::-webkit-scrollbar {
            width: 8px;
        }
        #chat-window::-webkit-scrollbar-thumb {
            background-color: #cbd5e1; /* slate-300 */
            border-radius: 4px;
        }
        #chat-window::-webkit-scrollbar-track {
            background-color: #f8fafc; /* slate-50 */
        }
        /* Ensure the body uses a clean font and fills the viewport */
        body {
            font-family: 'Inter', sans-serif;
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            background-color: #f1f5f9; /* Light background */
        }
        /* Style for the container to take up the screen space effectively */
        .chat-container {
            max-height: 85vh;
            max-width: 90vw;
            width: 500px;
            box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1), 0 5px 10px -5px rgba(0, 0, 0, 0.04);
        }
    </style>
</head>
<body class="p-4">

    <!-- Main Chat Container -->
    <div class="chat-container flex flex-col bg-white rounded-xl overflow-hidden shadow-2xl">

        <!-- Header -->
        <header class="bg-indigo-600 text-white p-4 text-center font-semibold text-lg">
            Simple Rule-Bot ðŸ¤–
        </header>

        <!-- Chat Window (Messages) -->
        <div id="chat-window" class="flex-grow p-4 overflow-y-auto space-y-4">
            <!-- Initial Bot Message -->
            <div class="flex justify-start">
                <div class="bg-gray-200 text-gray-800 p-3 rounded-lg rounded-tl-none max-w-xs md:max-w-md">
                    Hello! I'm a simple rule-based bot. Type 'help' to see what I can do.
                </div>
            </div>
        </div>

        <!-- Input Area -->
        <div class="p-4 border-t border-gray-200 flex space-x-2">
            <input type="text" id="user-input" placeholder="Type your message..."
                   class="flex-grow p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 transition duration-150"
                   autofocus>
            <button id="send-btn"
                    class="bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-3 px-5 rounded-lg transition duration-150 ease-in-out shadow-md hover:shadow-lg">
                Send
            </button>
        </div>
    </div>

    <!-- JavaScript Logic -->
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const chatWindow = document.getElementById('chat-window');
            const userInput = document.getElementById('user-input');
            const sendBtn = document.getElementById('send-btn');

            // --- Chatbot Rules Engine ---
            const chatbotRules = {
                // Key is the common keyword to match (converted to lowercase)
                // Value is a function to generate the response
                'hello': () => "Hello there! How can I assist you today?",
                'hi': () => "Hey! I'm ready to chat. What's on your mind?",
                'help': () => "I'm a simple rule-based bot. Try asking about the 'time', 'date', or just say 'hi' or 'bye'!",
                'time': () => `The current time is ${new Date().toLocaleTimeString()}.`,
                'date': () => `Today's date is ${new Date().toLocaleDateString('en-US', { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' })}.`,
                'bye': () => "Goodbye! Have a fantastic day.",
                'default': () => "I'm sorry, I don't understand that command. Please try 'help' for known topics."
            };

            // Function to add a message bubble to the chat window
            function displayMessage(text, sender) {
                const messageContainer = document.createElement('div');
                const messageBubble = document.createElement('div');
                messageBubble.textContent = text;

                if (sender === 'user') {
                    // User message (right-aligned, indigo background)
                    messageContainer.className = 'flex justify-end';
                    messageBubble.className = 'bg-indigo-500 text-white p-3 rounded-lg rounded-br-none max-w-xs md:max-w-md break-words';
                } else {
                    // Bot message (left-aligned, gray background)
                    messageContainer.className = 'flex justify-start';
                    messageBubble.className = 'bg-gray-200 text-gray-800 p-3 rounded-lg rounded-tl-none max-w-xs md:max-w-md break-words';
                }

                messageContainer.appendChild(messageBubble);
                chatWindow.appendChild(messageContainer);

                // Auto-scroll to the latest message
                chatWindow.scrollTop = chatWindow.scrollHeight;
            }

            // Function to determine the bot's response
            function getBotResponse(userText) {
                const normalizedText = userText.toLowerCase().trim();

                // Check for keyword matches
                for (const keyword in chatbotRules) {
                    // Simple check if the user's message contains the keyword
                    if (normalizedText.includes(keyword)) {
                        return chatbotRules[keyword]();
                    }
                }

                // Default response if no keyword is found
                return chatbotRules['default']();
            }

            // Main function to handle sending and receiving messages
            function sendMessage() {
                const userText = userInput.value.trim();

                if (userText === '') return; // Don't send empty messages

                // 1. Display User Message
                displayMessage(userText, 'user');

                // 2. Clear input field
                userInput.value = '';

                // 3. Get and Display Bot Response asynchronously (to simulate a slight delay)
                setTimeout(() => {
                    const botResponse = getBotResponse(userText);
                    displayMessage(botResponse, 'bot');
                }, 300); // 300ms delay for a more natural feel
            }

            // Event listener for the Send button
            sendBtn.addEventListener('click', sendMessage);

            // Event listener for the Enter key press in the input field
            userInput.addEventListener('keypress', (e) => {
                if (e.key === 'Enter') {
                    sendMessage();
                }
            });

            // Focus the input field on load for immediate typing
            userInput.focus();
        });
    </script>
</body>
</html>